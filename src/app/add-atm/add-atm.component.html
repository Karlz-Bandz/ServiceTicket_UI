<form [formGroup]="atmForm" (ngSubmit)="addAtm()">
    
    <mat-form-field>
        <mat-label>Identyfikator</mat-label>
           <input matInput type="text" formControlName="atmId" name="atmId" maxlength="10">
            @if (atmId?.hasError('required')) {
              <mat-error>Pole nie może być puste.</mat-error>
            }
            @if (atmId?.hasError('minlength')) {
              <mat-error>Identyfikator musi zawierać conajmniej 8 znaków.</mat-error>
            }
            @if (atmId?.hasError('allUpperCaseValidator')) {
              <mat-error>Identyfikator nie może zawierać małych liter.</mat-error>
            } 
            @if (atmId?.hasError('atmNotExists')) {
              <mat-error>Maszyna o podanym identyfikatorze już istnieje.</mat-error>
            }
    </mat-form-field>

    <mat-form-field>
        <mat-label>Numer seryjny</mat-label>
           <input matInput type="text" formControlName="serialNo" name="serialNo" maxlength="20">
            @if (serialNo?.hasError('required')) {
              <mat-error>Pole nie może być puste.</mat-error>
            }
            @if (serialNo?.hasError('minlength')) {
              <mat-error>Identyfikator musi zawierać conajmniej 8 znaków.</mat-error>
            }
            @if (serialNo?.hasError('serialNoNotExists')) {
              <mat-error>Maszyna o podanym numerze seryjnym już istnieje.</mat-error>
            }
    </mat-form-field>

    <mat-form-field>
        <mat-label>Nazwa klienta</mat-label>
            <input matInput type="text" formControlName="clientName" name="clientName" maxlength="120">
            @if (clientName?.hasError('required')) {
              <mat-error>Pole nie może być puste.</mat-error>
            }
    </mat-form-field>

    <mat-form-field>
      <mat-label>Wybierz typ</mat-label>
      <mat-select formControlName="type">
      @for (type of types; track type) {
        <mat-option [value]="type">{{type}}</mat-option>
      }
    </mat-select>
      @if (type?.hasError('required')) {
        <mat-error>Pole nie może być puste.</mat-error>
      }
    </mat-form-field>

    <mat-form-field>
        <mat-label>Lokalizacja</mat-label>
        <input matInput type="text" formControlName="location" name="location">
            @if (location?.hasError('required')) {
              <mat-error>Pole nie może być puste.</mat-error>
            }
    </mat-form-field>

    <mat-form-field>
        <mat-label>Telefon</mat-label>
        <input matInput type="tel" formControlName="phone" name="phone">
            @if (phone?.hasError('required')) {
              <mat-error>Pole nie może być puste.</mat-error>
            }
            @if (phone?.hasError('pattern')) {
                <mat-error>Pole może zawierać tylko spacje, + lub cyfry.</mat-error>
            }
    </mat-form-field>

    <div class="form-group">
         <button mat-raised-button color="primary" [disabled]="atmForm.invalid" type="submit">Dodaj maszynę</button>
         <button mat-button routerLink="/atm">Wróć</button>
    </div>
</form>
